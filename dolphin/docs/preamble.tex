\usepackage{fontspec} 
\usepackage{xeCJK} 
% \usepackage{mathtools} % can not be found in Ubuntu
\usepackage{amsmath} % for equations
\usepackage{url} % for \url
\usepackage{graphicx} % for images
\usepackage{chngcntr} % for fixing figure numbering, see http://www.tex.ac.uk/cgi-bin/texfaq2html?label=running-nos

%set chinese font
%\setCJKmainfont{AR PL UMing TW} 
\setCJKmainfont{cwTeXFangSong} 
%\setCJKmainfont{cwTeXKai} 
%\setCJKmainfont{cwTeXMing} 

%handle chinese newline
\XeTeXlinebreaklocale "zh"
\XeTeXlinebreakskip = 0pt plus 1pt

%custom abstract title
\renewcommand{\abstractname}{摘要} 

%custom chapter title
%\renewcommand{\chaptername}{章}
%\renewcommand{\chaptername}{第\CJKnumber{\thechapter}章}

%custom content title
\renewcommand{\contentsname}{目錄}

%custom figure title
\renewcommand{\figurename}{圖}

%paragraph spacing
\parskip 7.2pt

%label numbering style
%\renewcommand{\thefigure}{\arabic{figure}}
\counterwithout{figure}{chapter}

% args: label, filename, scale, caption
\newcommand{\figurewithcaption}[4] {
   %[htb] means placing the figure here, at the top, or at the bottom, order means preference, see http://www.sci.utah.edu/~macleod/latex/latex-figures.html
   \begin{figure}[htb]
   \centering
   \includegraphics[scale=#3]{#2}
   \caption{#4}
   \label{#1} % whatch out for any white space inside braces
   \end{figure}
}
